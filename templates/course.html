{% extends "base_course.html" %}
{% block title %}Выполнение лабораторной работы{% endblock %}
{% block main %}
{% load staticfiles %}
<script type="text/javascript" src="{% static 'js/' %}jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="{% static 'js/highcharts/highcharts.js' %}"></script>
<script type="text/javascript">
function checkCourse(){
	var xhr = new XMLHttpRequest();
	xhr.open('GET', "http://{{ host }}/check_answer/{{ id }}/{{ user.id }}/", false);
	xhr.send();
	window.location.reload();
}
</script>

<table class="table-construct">
    <tr>
		<td class="td-construct">
			<div class="div-link-construct"><a class="link-construct" href="/method/{{ id }}/">Методические материалы</a></div>
		</td>
		<td class="td-construct">
			<div class="div-link-construct"><a class="link-construct" href="/method/{{ id }}/">Помощь преподователя</a></div>
		</td>
	</tr>
</table>

<div class="main_course">
{% for control in controls %}
	<div class="main_control">
	{% if control.type.code %}
	    {% with template_name=control.type.code|stringformat:"s"|add:".html" %}
	    	{% if control.wp_param.code %}
	    		{% with surl=control.wp_param.workplace.url|safe|add:control.wp_param.code|safe %}
	    		{% include "controls/"|add:template_name with ctl=control url=surl %}
	    		{% endwith %}
	    	{% else %}
	    		{% include "controls/"|add:template_name with ctl=control %}
	    	{% endif %}
	    {% endwith %}
	{% endif %}
	</div>
{% endfor %}
</div>

<table class="table-answer">
	<tr>
		<td style="text-align: right; margin-bottom: 30px;" colspan = 2>
			<div class="div-answer-submit" onClick="checkCourse ();">Завершить лабораторную работу</div>
		</td>
	</tr>
</table>
{% endblock %}
