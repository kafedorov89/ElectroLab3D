<script>
function sendRequestonline{{ ctl.id }}(url) {
$(function(){
	$.ajax({
		url: url,
		success: function(data){
			document.getElementById("online_{{ ctl.id }}").value = data.Data
		},
		error: function(data){
			
		},
		type: "GET",
		dataType: "json"
		});
	});
}

function flTrue{{ ctl.id }}(){
	document.getElementById("flag{{ ctl.id }}").value = 'True';
}

function startRead{{ ctl.id }}(){
	flag = document.getElementById("flag{{ ctl.id }}").value;
	sendRequestonline{{ ctl.id }} ('{{ url }}');
	if (flag == 'True')
	{
		setTimeout("startRead{{ ctl.id }}()",200);
	}
}

function stopRead{{ ctl.id }}(){
	document.getElementById("flag{{ ctl.id }}").value = 'False';
}
</script>

<h3>{{ ctl.name }}</h3>
<input type='hidden' id="flag{{ ctl.id }}" name="flag{{ ctl.id }}" value="True">
<input type='text' style="margin-bottom: 20px;" id="online_{{ ctl.id }}" name="online_{{ ctl.id }}" value="" readonly>
<br>
<div class="div-construct-submit" onClick="flTrue{{ ctl.id }}(); startRead{{ ctl.id }}();">Начать считывание</div>
<br>
<div class="div-construct-submit" onClick="stopRead{{ ctl.id }}();">Закончить считывание</div>